# 出行场景规则
id: RULE_TRAVEL
priority: HIGH
mode: ONE_TAP  # SUGGEST_ONLY | ONE_TAP | AUTO
enabled: true

conditions:
  # 火车站/机场位置
  - type: location
    value: TRAIN_STATION
    weight: 0.8

  - type: location
    value: AIRPORT
    weight: 0.8

  # 日历中有出行相关事件（包含关键词：火车、飞机、航班、高铁等）
  - type: calendar
    value: TRAVEL_EVENT
    weight: 0.9

  # 出行类应用在前台
  - type: app_usage
    intent: TRAVEL_APP_TOP1
    weight: 0.7

actions:
  # 开启勿扰模式
  - target: system
    action: setDoNotDisturb
    params:
      enable: true
      allowCalls: true
      whitelist: ['emergency_contacts']

  # 打开12306或航司应用
  - target: app
    intent: TRAVEL_APP_TOP1
    action: launch_ticket_qr
    params:
      autoLogin: true

  # 开启屏幕常亮（方便查看行程）
  - target: system
    action: setWakeLock
    params:
      enable: true
      timeout: 300000  # 5分钟超时

  # 发送通知
  - target: notification
    action: suggest
    params:
      title: '出行模式已准备'
      body: '已为您准备乘车码和行程信息'
      mode: 'ONE_TAP'
      actions:
        - label: '打开'
          action: 'execute'
        - label: '稍后'
          action: 'ignore'
