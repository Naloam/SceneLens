# 睡前场景规则
id: RULE_SLEEP
priority: HIGH
mode: ONE_TAP  # SUGGEST_ONLY | ONE_TAP | AUTO
enabled: true

conditions:
  # 夜晚时间段 (23:00 之后)
  - type: time
    value: NIGHT  # 23:00-07:00
    weight: 0.7

  # 正在充电
  - type: battery
    value: CHARGING
    weight: 0.8

  # 屏幕关闭状态
  - type: screen
    value: SCREEN_OFF
    weight: 0.6

actions:
  # 开启睡眠勿扰模式（允许闹钟）
  - target: system
    action: setDoNotDisturb
    params:
      enable: true
      allowCalls: false
      allowAlarms: true
      whitelist: []

  # 显示次日闹钟信息
  - target: notification
    action: suggest
    params:
      title: '睡眠模式已准备'
      body: '已为您开启睡眠勿扰模式'
      mode: 'SUGGEST_ONLY'
      actions:
        - label: '知道了'
          action: 'dismiss'
